<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>看了些vue源码 | duuliy</title><meta name="description" content="core核心代码里面，6成代码都是为了各种方法服务的..."><meta name="generator" content="duuliy"><meta name="author" content="duuliy"><meta name="keywords"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/logo.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/logo.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/logo.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/logo.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/logo.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/logo.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/logo.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/logo.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="128x128" href="/images/favicon-128.png"><link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-196x196.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="logo.png"><meta name="msapplication-square70x70logo" content="logo.png"><meta name="msapplication-square150x150logo" content="logo.png"><meta name="msapplication-wide310x150logo" content="logo.png"><meta name="msapplication-square310x310logo" content="logo.png"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><div class="logo"></div><h1><a href="/" alt="duuliy" title="duuliy" itemprop="headline">duuliy</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/ " alt="主页" title="主页" itemprop="url">主页</a></li><li itemprop="name"><a href="/archives" alt="归档" title="归档" itemprop="url">归档</a></li><li itemprop="name"><a href="/about" alt="关于" title="关于" itemprop="url">关于</a></li></ul></nav><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="theme-by text-muted">Theme by
<a target="_blank" rel="noopener" href="https://github.com/mkkhedawat/clexy">clexy-hexo</a></p><p class="copyright text-muted">© duuliy • 2025</p></div></div></div></footer><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline" class="post-heading">看了些vue源码</h1><span class="post-meta"></span><span class="page-tag-anchor">2018-3-14</span><br><br><p>vue2.x<br>总结：core核心代码里面，6成代码都是为了各种方法服务的，4成用于virtualDom 生命周期等等。。</p>
<p>  render渲染：<br>初始化方法开始找代码，在 src/core/instance/index.js 中，先执行了 renderMixin 方法，然后在Vue实例化的时候执行了 vm._init 方法，在这个 vm._init 方法中执行了 initRender 方法。renderMixin 和 initRender 都在 src/core/instance/render.js 中</p>
<p>1.</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> createTextVNode <span class="token punctuation">(</span>val<span class="token punctuation">:</span> string <span class="token operator">|</span> number<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VNode</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> <span class="token function">String</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>2.</p>
<pre class=" language-js"><code class="language-js">declare type VNodeWithData <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  tag<span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  data<span class="token punctuation">:</span> VNodeData<span class="token punctuation">;</span>
  children<span class="token punctuation">:</span> Array<span class="token punctuation">;</span>
</code></pre>
<p>声明一个对象类的属性类型。。</p>
<p>3.生命周期就是，整个渲染过程的特定的事情执行的方法。<br> 生命周期mount</p>
<pre class=" language-js"><code class="language-js">Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$mount <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
  el<span class="token operator">?</span><span class="token punctuation">:</span> string <span class="token operator">|</span> Element<span class="token punctuation">,</span>
  hydrating<span class="token operator">?</span><span class="token punctuation">:</span> boolean
<span class="token punctuation">)</span><span class="token punctuation">:</span> Component <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  el <span class="token operator">=</span> el <span class="token operator">&amp;&amp;</span> inBrowser <span class="token operator">?</span> <span class="token function">query</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">:</span> undefined
  <span class="token keyword">return</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> el<span class="token punctuation">,</span> hydrating<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>先执行 方法成功或失败  返回v_dom渲染方法。。</p>
<p>4.template解析<br>a.获取el元素。<br>b.判断el是否为body或者html。<br>c.为$options编译render函数。<br>d.执行之前的mount函数。</p>
<p>5.双向绑定<br>Object.defineProperty() 方法，监控对数据的操作，从而可以自动触发数据同步。并且，由于是在不同的数据上触发同步，可以精确的将变更发送给绑定的视图，而不是对所有的数据都执行一次检测。通过数据劫持结合发布者-订阅者模式的方式来实现<br>a.实现options参数处理<br>b.实现observer数据劫持<br>c.实现Dep订阅器(管理watcher,对调用的data数据进行依赖注入), 当watcher发现变化时,调用dep来更新<br>d.实现Watcher观察者<br>e.实现基础的compile编译</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//(核心逻辑 获取dom,遍历dom,解析'&amp;#123;&amp;#123;&amp;#125;&amp;#125;','@',v-for等等)</span>
</code></pre>
<p>6.Vue.prototype.$on<br>依次压进数组，然后执行。。</p>
<p>7.Vue.prototype.$once<br>先执行$off  event,然后放在this.的原型链上调用argument。。</p>
<p>8.Vue.prototype.$off<br>如果fn上面有那么就splice。。</p>
<p>9.Vue.prototype.$emit</p>
</article><br><br><span class="next-post"><a href="/2018/01/23/类型总结/" itemprop="url">上一章 ⇒</a></span><span class="prev-post"><a href="/2018/05/24/vue组合-netCore/" itemprop="url">⇐ 下一章 </a></span><br><br><br></main></body></html>