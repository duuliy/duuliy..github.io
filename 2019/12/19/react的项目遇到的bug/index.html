<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>react的项目遇到的bug | duuliy</title><meta name="description" content="1.不在from表单中onchange事件不得获取e.target.value..."><meta name="generator" content="duuliy"><meta name="author" content="duuliy"><meta name="keywords"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/logo.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/logo.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/logo.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/logo.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/logo.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/logo.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/logo.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/logo.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="128x128" href="/images/favicon-128.png"><link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-196x196.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="logo.png"><meta name="msapplication-square70x70logo" content="logo.png"><meta name="msapplication-square150x150logo" content="logo.png"><meta name="msapplication-wide310x150logo" content="logo.png"><meta name="msapplication-square310x310logo" content="logo.png"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><div class="logo"></div><h1><a href="/" alt="duuliy" title="duuliy" itemprop="headline">duuliy</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/ " alt="主页" title="主页" itemprop="url">主页</a></li><li itemprop="name"><a href="/archives" alt="归档" title="归档" itemprop="url">归档</a></li><li itemprop="name"><a href="/about" alt="关于" title="关于" itemprop="url">关于</a></li></ul></nav><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p class="theme-by text-muted">Theme by
<a target="_blank" rel="noopener" href="https://github.com/mkkhedawat/clexy">clexy-hexo</a></p><p class="copyright text-muted">© duuliy • 2023</p></div></div></div></footer><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline" class="post-heading">react的项目遇到的bug</h1><span class="post-meta"></span><span class="page-tag-anchor">2019-12-19</span><br><br><p>1.不在from表单中onchange事件不得获取e.target.value.<br>  先调用e.persist（）  才能用。。。具体原因不明，可能是在antd中这这个event需要初始化。。。<br>react特有！如果你想异步访问事件属性，你需在事件上调用 event.persist()，此方法会从池中移除合成事件，允许用户代码保留对事件的引用。</p>
<p>2.键盘事件 .<br>onKeyDown :<br>enter：e.keyCode=13</p>
<p>3.antd多个表单提交时。<br>每个表单都使用Form.create()包裹一下，并且每个表单使用单独的state。</p>
<p>4.yield  才能用call   async不能</p>
<p>await 会自动包一层primise，但是call是react-saga里面的方法，用做处理异步。。这两个方式中一些地方重复了，返回的事call对象<br>但是可以通过const yy=await api.xx()获取值，此时通过dispatch()可以调用reducer，因为put和call都是saga配合yield使用的。</p>
<p>5.如何实现vue中的watch以及computed<br><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html#static-getderivedstatefrom">https://react.docschina.org/docs/react-component.html#static-getderivedstatefrom</a></p>
<p>6.proTypes是否还要验证reduer（dva）里面传过来的数据</p>
<p>7.antd 表单如何外面改变里面input的值：<br>点击保存之后，对表单进行了验证，导致之后请求的数据无法在更新到input框中，也就是说即使在state中有值，也不会更新initialValue值，就导致搜索后的值不能正确填入input中，表单也就提交不了。<br>this.props.form.setFieldsValue({name:result.data});    动态设置。。<br>还有一个问题，如果输入了账号进行搜索后匹配了name，也填入了input框中。但是又修改了账号，然后直接提交，就会导致账号和name不匹配，也就是name是存在的，但就不是对应的账号了。会导致保存之后，如果正确的账号和name已经存在，数据库出现数据存储问题。<br>给账号输入的Input框添加onChange事件</p>
<pre class=" language-js"><code class="language-js">change <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">setFieldsValue</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token punctuation">:</span><span class="token string">''</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>在表单里面添加onChange拿不到event.target,要getFieldValue获取数据就可以了。<br>//这样使用validateFields方法不会空数据时调用validator而使他成为异步。</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请输入！'</span><span class="token punctuation">,</span> validator<span class="token punctuation">:</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeSelectedRowsCustom</span><span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>这样使用就是异步很痛苦！！！！！！！！！！！！！！！！<br>3.x的版本只能通过父组件传form以及item到子组件（或者父调子的this），然后统一调用validator</p>
<pre class=" language-js"><code class="language-js"><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请输入！'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>validator<span class="token punctuation">:</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeSelectedRowsCustom</span><span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>还有种办法是控制value和onChange：</p>
<pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span>Input value<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> onChange<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">/</span><span class="token operator">></span>
onChange<span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre>
<p>在form.Item里面还可以用initialValue设置默认值。。<br>关于setFieldsValue和defaultVal的神奇:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_31307253/article/details/56482754">https://blog.csdn.net/qq_31307253/article/details/56482754</a></p>
<p>8.antd,表格需要选中状态但是不要单选框：<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6d0f5d2a1f4e">https://www.jianshu.com/p/6d0f5d2a1f4e</a></p>
<p>9.表单 输入框长度(官网没有，百度不好搜)；</p>
<pre class=" language-js"><code class="language-js"> labelCol<span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>style<span class="token punctuation">:</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> 
</code></pre>
<p>10.antd 时间选择器<br>默认值：不能直接用yyxx-gg-zz的形式，只能用moment（）来写一个对象的形式的原始时间。</p>
<p>11.antd table尾部统计问题<br>在footer里面再加一个table<br><a target="_blank" rel="noopener" href="https://codepen.io/afc163/pen/OgExEW?editors=0110">https://codepen.io/afc163/pen/OgExEW?editors=0110</a><br>若不想要model的尾部则：footer={null}</p>
<p>12.父调子方法：<br>函数式组件不能用static  和ref ….父子交互这样的话，只能用互相传props,还是很麻烦。。<br>用了类组件  用static  方法里面没法调用当前的子this，做model还是不方便。。。<br>交互多的，我最后还是选了类组件+传统事件向上传this的方法  this.child来用，在compontDidMouint调用父组件方法传this，然后调用子组件的方法。。。！！！！<br>wrappedComponentRef ref都行</p>
<p>13.组件绑定的值改变，defalutvalue不改变。<br>defalutvalue始终只会渲染一次，无论怎么改变。。所以动态初始值不能使用默认值，，，只能绑定成value…</p>
<p>14.弹框拖拽效果插件：<br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-drag">https://www.npmjs.com/package/react-drag</a></p>
<p>15.关于一些原生js的使用方法：<br>在vue里面是可以直接 location.href ，<br>但是react不行，只能： window.location.href 。<br>react 是在类class下面的，而vue是在一大的this。。。。</p>
<p>16.DocumentTitle  react  插件，来动态改变页面的title.</p>
<p>17.umi 国际化<br><a target="_blank" rel="noopener" href="https://pro.ant.design/docs/i18n-cn%E3%80%82%E3%80%82">https://pro.ant.design/docs/i18n-cn。。</a></p>
<p>18.antd响应式：<br>ContainerQuery</p>
<p>19.一个关键单bug: 子组件获取不到router的history.<br>可以用static 静态化来传router 关键字：contexTypes..<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/sanstu/article/details/80080002">https://blog.csdn.net/sanstu/article/details/80080002</a></p>
<p>20.antd table thead tbody 不换行+省略号  会超过屏幕计算。</p>
<p>使用 “fixed” 布局方式时，整个表格可以在其首行被下载后就被解析和渲染。这样对于 “automatic” 自动布局方式来说可以加速渲染，但是其后的单元格内容并不会自适应当前列宽。任何一个包含溢出内容的单元格可以使用 overflow  属性控制是否允许内容溢出。<br>此关键字表示背景相对于视口固定。即使一个元素拥有滚动机制，背景也不会随着元素的内容滚动。</p>
<pre class=" language-js"><code class="language-js">table<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      width<span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
      table<span class="token operator">-</span>layout<span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//这条属性就是让table的内部布局固定大小</span>
      th<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        width<span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
        div<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
          white<span class="token operator">-</span>space<span class="token punctuation">:</span>nowrap <span class="token punctuation">;</span>
          overflow<span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
      td<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        overflow<span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
        text<span class="token operator">-</span>overflow<span class="token punctuation">:</span>ellipsis<span class="token punctuation">;</span>
        white<span class="token operator">-</span>space<span class="token punctuation">:</span>nowrap 
      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>21.state里面的数据 只能setState操作，但是里面的子项可以直接赋值。。</p>
<p> eg: g={<br>             a:1<br>           }<br>g.a=6….能够正确渲染出来。。</p>
<p>22./asset/relation/list/:page<br>共享页面的动态路由。!!!</p>
<p>23.多个effects可以用同一个save。</p>
<pre class=" language-js"><code class="language-js"> <span class="token comment" spellcheck="true">// 获取基准项信息列表</span>
    <span class="token operator">*</span> getBenchmarkList <span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> payload <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> call<span class="token punctuation">,</span> put <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>asset<span class="token punctuation">.</span>getBenchmarkList<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> type<span class="token punctuation">:</span> <span class="token string">'save'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>好m， benchmarkList<span class="token punctuation">:</span> data<span class="token punctuation">.</span>body <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">// 获取资产关联的基准项信息列表</span>
    <span class="token operator">*</span> getAssetBenchmarkList <span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> payload <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> call<span class="token punctuation">,</span> put <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>asset<span class="token punctuation">.</span>getAssetBenchmarkList<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> type<span class="token punctuation">:</span> <span class="token string">'save'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> benchmarkList<span class="token punctuation">:</span> data<span class="token punctuation">.</span>body <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  reducers<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    save <span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token operator">...</span>action<span class="token punctuation">.</span>payload <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>24.Model组件：<br>必须加destroyOnClose属性，否则model不会销毁。</p>
<p>25.const { history: { location: { search } }  } = this.props<br>    const { assetId, isView } = queryString.parse(search.slice(1))<br>获取url后面跟的参数，好用</p>
<p>26.表单项的initialValue属性,发现Select组件的placeholder属性并没有起作用:<br>做判断：<br>initialValue: publicAccount.certType ? publicAccount.certType : undefined,</p>
<p>27.form里onchange 里面设置setFieldsValue 没有效果<br><a target="_blank" rel="noopener" href="http://ju.outofmemory.cn/entry/348216">http://ju.outofmemory.cn/entry/348216</a><br>normalize 来控制代替setFieldsValue </p>
<p>28.antd 表单动态验证出错：<br>用动态：<br>this.props.form.validateFields({ force: true }, (err, values) =&gt; {</p>
<p>29.import shortid from  “shortid”;<br>使用下标作为key,只有输入的内容是动态的（动态部分出错排序时）才会出错!!!<br>唯一id:shortid.generate() 循环时用。<br>三种情况可以用index作为key。<br>列表和子元素是静态的<br>列表中的子元素没有ID，列表永远不会被重新排序或过滤<br>列表是不可变的 </p>
<p>30.<br>keyDown 会在你按下任何按键时触发，但是 keyPress 只会在你按下的按键可以产生出一个字符的时候触发，白话一点就是你按下这按键是在打字。</p>
<p>31.无法满足的table无限滚动（类似轮播）效果<br>做table无限滚动（类似轮播），需求是后端每2s推10条数据，要求100时新数据加入10，老数据删除10，同时页面像中奖一样向下滚动。<br>此页面table  10条数据390px  ,用scrollFn 函数 理论达到效果需要2000/390=5.12ms一次，但是浏览器规定延时器最小时间是10ms，实际上加上异步接口渲染等，这里需要28ms。。</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> scrollFn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span>scrollTop<span class="token operator">++</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>32.umi.js的404在路由里面输入url错误自动匹配404<br> {<br>        // path: ‘/404’,<br>        component:’404’,<br>      },</p>
<p>33.不要把所有数据都存redux,如果接口速度慢的话，会有bug<br>如果不是公共数据，不要用redux,<br>所有数据都存redux,在很多情况都会存在奇葩bug,比如多开页面并且单点登录，就可能发生内存泄漏。<br>单点登录下，多开窗口dispatch可能会调不起effectgetBugRepair</p>
<p>34.Upload 多个时，必须加fileList<br>由于目前antd修复此问题，但是不能切换另一个upload（此时的if判断渲染）,不然依然diff定位不到。。<br>特别是循环的时候。单独2个切换可以定位。</p>
<p>35.Tooltip 会随着屏幕移动，是因为：<br>拿到当前 的 位置信息 , 动态赋给 当前 div, 最后 绑定一个 resize 事件, 解决 窗口改变之后 位置不对的问题。<br>antd 可以设置为  绝对定位在 父元素，但是父元素 有 overflow:hidden 之类的属性 tooltip 可能会被截取一部份。</p>
<p>36.ie上面antd table 的columns 增加或减少行，出现留白。<br>是因为设置了table-layout 把去掉或者：<br>为表格设置合并边框模型：</p>
<pre class=" language-js"><code class="language-js">table
  <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  border<span class="token operator">-</span>collapse<span class="token punctuation">:</span>collapse<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>37.antd 以及组件最好返回undefined不要去返回null，为空很可能报错。</p>
<p>38.Forced reflow while executing JavaScript took <N>ms 强制回流。<br>减少不必要的DOM深度。DOM树中某一级别的更改会导致该树的每个级别的更改-一直到根，一直到修改节点的子级。这导致花费更多的时间执行回流。<br>最小化CSS规则，并删除未使用的CSS规则。<br>如果您进行复杂的渲染更改（例如动画），请不要进行此操作。使用绝对位置或固定位置来完成此操作。<br>避免使用不必要的复杂CSS选择器-特别是后代选择器-这些选择器需要更多的CPU能力来进行选择器匹配。</N></p>
<p>39.antd的getFieldDecorator会向自定义组件隐式传入onChange事件以及value值，可以通过这个事件去获得值。setFieldsValue这自定义组件上设置value =｛this.props.value｝。</p>
<p>40.antd Upload 设置setFieldsValue 的时候必须把他config上的fileList也要设置this.setState({ fileList: file.fileList })，否则不会回显成功。</p>
<p>41.DatePicker 想限制前后时间，中间必须用 || 而不能用 &amp;&amp;<br>serviceLife &lt; momentDate || momentDate &lt; buyDate</p>
<p>42.atePicker 设置mode为month，则使用disableDate和disableTime不生效。<br>需要自己包2个monthPicker来解决禁用时间的问题，在3.X版本，若是4.X则有人提pr封装好了。</p>
</article><br><br><span class="next-post"><a href="/2019/09/01/jenkins总结/" itemprop="url">上一章 ⇒</a></span><span class="prev-post"><a href="/2019/12/29/2019年终总结/" itemprop="url">⇐ 下一章 </a></span><br><br><br></main></body></html>